<div
  class="bg-neutral-950 border border-gray-800 rounded-lg h-full flex flex-col"
>
  <div class="border-b border-gray-800 p-4 sm:p-6">
    <h3 class="text-base sm:text-lg font-semibold text-gray-100">
      Transações Recentes
    </h3>
  </div>

  <div class="p-4 sm:p-6 flex-1">
    @if (isLoading()) {
    <div class="space-y-3">
      @for (i of [1,2,3,4,5]; track i) {
      <div class="flex items-center gap-3 animate-pulse">
        <div class="w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gray-800"></div>
        <div class="flex-1 space-y-2">
          <div class="h-4 bg-gray-800 rounded w-3/4"></div>
          <div class="h-3 bg-gray-800 rounded w-1/2"></div>
        </div>
        <div class="w-16 h-6 bg-gray-800 rounded"></div>
      </div>
      }
    </div>
    } @else {
    <div class="space-y-3 sm:space-y-4">
      <!-- ✅ FIX: Call transactions() to get the array -->
      @for (transaction of transactions(); track transaction.id) {
      <div
        class="flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg hover:bg-gray-900 transition-colors"
      >
        <!-- Ícone -->
        <div class="shrink-0">
          <div
            [class]="
              getTransactionColor(transaction.type) +
              ' p-1.5 sm:p-2 rounded-full'
            "
          >
            <lucide-angular
              [img]="getTransactionIcon(transaction.type)"
              class="h-3 w-3 sm:h-4 sm:w-4"
            />
          </div>
        </div>

        <!-- Conteúdo -->
        <div class="flex-1 min-w-0">
          <p class="text-sm font-medium text-gray-100 truncate">
            {{ transaction.title }}
          </p>
          <p class="text-xs text-gray-400 truncate">
            {{ getCategoryName(transaction.categoryId) }}
          </p>
        </div>

        <!-- Valor e Data -->
        <div class="flex flex-col items-end shrink-0">
          <span
            [class]="
              getTransactionColor(transaction.type) + ' text-sm font-semibold'
            "
          >
            {{ formatCurrency(transaction.amount) }}
          </span>
          <span class="text-xs text-gray-400">
            {{ formatDate(transaction.date) }}
          </span>
        </div>
      </div>
      }

      <!-- ✅ FIX: Also call transactions() here -->
      @if (transactions().length === 0) {
      <div class="text-center py-6 sm:py-8 text-gray-500">
        <p class="text-sm sm:text-base">Nenhuma transação recente.</p>
      </div>
      }
    </div>
    }
  </div>
</div>
